---
// Itinerario.astro
---

<section class="py-12 px-4 relative overflow-hidden">
  <!-- Fondo sutil -->
  <div class="absolute inset-0 bg-gradient-to-b from-[#fffaf5]/30 via-transparent to-[#fff5f5]/30 z-0"></div>

  <div class="max-w-5xl mx-auto relative z-10">

    <!-- üå∏ FLORES LATERALES IZQUIERDA -->
    <div class="absolute left-0 top-1/2 -translate-y-1/2 w-12 md:w-20 lg:w-24 pointer-events-none opacity-40" id="flor-itinerario-izq">
      <img src="/imagenes/FloresIzquierda.webp" alt="Flores" class="w-full h-auto object-contain scale-x-[-1]" />
    </div>

    <!-- üå∏ FLORES LATERALES DERECHA -->
    <div class="absolute right-0 top-1/2 -translate-y-1/2 w-12 md:w-20 lg:w-24 pointer-events-none opacity-40" id="flor-itinerario-der">
      <img src="/imagenes/FloresDerecha.webp" alt="Flores" class="w-full h-auto object-contain scale-x-[-1]" />
    </div>

    <div class="max-w-3xl mx-auto">

      <!-- T√çTULO -->
      <div class="text-center mb-12" id="titulo-itinerario">
        <h2 class="font-charm text-3xl md:text-4xl lg:text-5xl text-[#a27735] font-bold mb-4">
          Itinerario
        </h2>
        <!-- L√≠nea decorativa -->
        <div class="flex items-center justify-center gap-2">
          <div class="w-12 h-[1px] bg-gradient-to-r from-transparent to-[#a27735]"></div>
          <div class="w-1.5 h-1.5 rounded-full bg-[#a27735]"></div>
          <div class="w-12 h-[1px] bg-gradient-to-l from-transparent to-[#a27735]"></div>
        </div>
      </div>

      <!-- TIMELINE CONTAINER -->
      <div class="relative">
        
        <!-- L√≠nea vertical central -->
        <div class="absolute left-1/2 -translate-x-1/2 top-0 bottom-0 w-[2px] bg-gradient-to-b from-[#a27735] via-[#c9a55e] to-[#a27735] opacity-30" id="linea-central"></div>

        <!-- EVENTOS DEL ITINERARIO -->
        <div class="space-y-0">

          <!-- ‚ù§Ô∏è CORAZ√ìN INICIAL -->
          <div class="flex justify-center my-4">
            <svg class="w-8 h-8 text-[#a27735] corazon-item" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
            </svg>
          </div>

          <!-- EVENTO 1: Recepci√≥n de Invitados (DERECHA) -->
          <div class="relative evento-item">
            <div class="grid grid-cols-2 gap-4 items-center">
              <!-- Espacio izquierdo vac√≠o -->
              <div></div>
              
              <!-- Contenido derecha -->
              <div class="text-left pl-6">
                <div class="bg-white/80 backdrop-blur-sm rounded-2xl border-2 border-[#a27735]/30 p-5 shadow-lg hover:shadow-xl transition-all duration-300">
                  <p class="font-charm text-lg md:text-xl text-[#a27735] font-bold mb-2">
                    Recepci√≥n de Invitados
                  </p>
                  <p class="font-charm text-sm md:text-base text-[#95303a]">
                    Hora: 16:00
                  </p>
                </div>
              </div>
            </div>
          </div>

          <!-- ‚ù§Ô∏è CORAZ√ìN SEPARADOR -->
          <div class="flex justify-center my-4">
            <svg class="w-8 h-8 text-[#a27735] corazon-item" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
            </svg>
          </div>

          <!-- EVENTO 2: Vals y Brindis (IZQUIERDA) -->
          <div class="relative evento-item">
            <div class="grid grid-cols-2 gap-4 items-center">
              <!-- Contenido izquierda -->
              <div class="text-right pr-6">
                <div class="bg-white/80 backdrop-blur-sm rounded-2xl border-2 border-[#a27735]/30 p-5 shadow-lg hover:shadow-xl transition-all duration-300">
                  <p class="font-charm text-lg md:text-xl text-[#a27735] font-bold mb-2">
                    Vals y Brindis
                  </p>
                  <p class="font-charm text-sm md:text-base text-[#95303a]">
                    Hora: 16:00
                  </p>
                </div>
              </div>
              
              <!-- Espacio derecho vac√≠o -->
              <div></div>
            </div>
          </div>

          <!-- ‚ù§Ô∏è CORAZ√ìN SEPARADOR -->
          <div class="flex justify-center my-4">
            <svg class="w-8 h-8 text-[#a27735] corazon-item" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
            </svg>
          </div>

          <!-- EVENTO 3: Cena (DERECHA) -->
          <div class="relative evento-item">
            <div class="grid grid-cols-2 gap-4 items-center">
              <div></div>
              
              <div class="text-left pl-6">
                <div class="bg-white/80 backdrop-blur-sm rounded-2xl border-2 border-[#a27735]/30 p-5 shadow-lg hover:shadow-xl transition-all duration-300">
                  <p class="font-charm text-lg md:text-xl text-[#a27735] font-bold mb-2">
                    Cena
                  </p>
                  <p class="font-charm text-sm md:text-base text-[#95303a]">
                    Hora: 18:00
                  </p>
                </div>
              </div>
            </div>
          </div>

          <!-- ‚ù§Ô∏è CORAZ√ìN SEPARADOR -->
          <div class="flex justify-center my-4">
            <svg class="w-8 h-8 text-[#a27735] corazon-item" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
            </svg>
          </div>

          <!-- EVENTO 4: Torta (IZQUIERDA) -->
          <div class="relative evento-item">
            <div class="grid grid-cols-2 gap-4 items-center">
              <div class="text-right pr-6">
                <div class="bg-white/80 backdrop-blur-sm rounded-2xl border-2 border-[#a27735]/30 p-5 shadow-lg hover:shadow-xl transition-all duration-300">
                  <p class="font-charm text-lg md:text-xl text-[#a27735] font-bold mb-2">
                    Torta
                  </p>
                  <p class="font-charm text-sm md:text-base text-[#95303a]">
                    Hora: 21:00
                  </p>
                </div>
              </div>
              
              <div></div>
            </div>
          </div>

          <!-- ‚ù§Ô∏è CORAZ√ìN SEPARADOR -->
          <div class="flex justify-center my-4">
            <svg class="w-8 h-8 text-[#a27735] corazon-item" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
            </svg>
          </div>

          <!-- EVENTO 5: Fiesta y Baile (DERECHA) -->
          <div class="relative evento-item">
            <div class="grid grid-cols-2 gap-4 items-center">
              <div></div>
              
              <div class="text-left pl-6">
                <div class="bg-white/80 backdrop-blur-sm rounded-2xl border-2 border-[#a27735]/30 p-5 shadow-lg hover:shadow-xl transition-all duration-300">
                  <p class="font-charm text-lg md:text-xl text-[#a27735] font-bold mb-2">
                    Fiesta y Baile
                  </p>
                  <p class="font-charm text-sm md:text-base text-[#95303a]">
                    Hora: 22:00
                  </p>
                </div>
              </div>
            </div>
          </div>

          <!-- ‚ù§Ô∏è CORAZ√ìN SEPARADOR -->
          <div class="flex justify-center my-4">
            <svg class="w-8 h-8 text-[#a27735] corazon-item" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
            </svg>
          </div>

          <!-- EVENTO 6: Despedida (IZQUIERDA) -->
          <div class="relative evento-item">
            <div class="grid grid-cols-2 gap-4 items-center">
              <div class="text-right pr-6">
                <div class="bg-white/80 backdrop-blur-sm rounded-2xl border-2 border-[#a27735]/30 p-5 shadow-lg hover:shadow-xl transition-all duration-300">
                  <p class="font-charm text-lg md:text-xl text-[#a27735] font-bold mb-2">
                    Despedida
                  </p>
                  <p class="font-charm text-sm md:text-base text-[#95303a]">
                    Hora: 00:00
                  </p>
                </div>
              </div>
              
              <div></div>
            </div>
          </div>

          <!-- ‚ù§Ô∏è CORAZ√ìN FINAL -->
          <div class="flex justify-center my-4">
            <svg class="w-8 h-8 text-[#a27735] corazon-item" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
            </svg>
          </div>

        </div>

      </div>

      <!-- DECORACI√ìN FLORAL FINAL -->
      <div class="flex justify-center mt-12" id="deco-final">
        <img src="/imagenes/Separador.png" alt="Decoraci√≥n" class="w-48 md:w-56 h-auto opacity-70" />
      </div>

    </div>
  </div>
</section>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  if (typeof window !== 'undefined') {
    document.addEventListener("DOMContentLoaded", () => {
      console.log("üìÖ Iniciando itinerario con corazones...");

      // üéØ ESTADO INICIAL
      gsap.set("#titulo-itinerario", { opacity: 0, y: -30 });
      gsap.set("#linea-central", { scaleY: 0, transformOrigin: "top" });
      gsap.set(".evento-item", { opacity: 0, scale: 0.9 });
      gsap.set(".corazon-item", { opacity: 0, scale: 0 });
      gsap.set("#flor-itinerario-izq", { opacity: 0, x: -40 });
      gsap.set("#flor-itinerario-der", { opacity: 0, x: 40 });
      gsap.set("#deco-final", { opacity: 0, scale: 0.8 });

      // ‚ú® ANIMACI√ìN
      const tl = gsap.timeline({
        scrollTrigger: {
          trigger: "#titulo-itinerario",
          start: "top 85%",
          end: "top 20%",
          toggleActions: "play none none reverse",
        },
      });

      // 1. T√≠tulo
      tl.to("#titulo-itinerario", {
        opacity: 1,
        y: 0,
        duration: 0.8,
        ease: "power2.out",
      })

      // 2. L√≠nea central crece
      .to("#linea-central", {
        scaleY: 1,
        duration: 1.5,
        ease: "power2.inOut",
      }, "-=0.3")

      // 3. Flores laterales
      .to("#flor-itinerario-izq, #flor-itinerario-der", {
        opacity: 0.4,
        x: 0,
        duration: 1,
        ease: "power2.out",
      }, "-=1")

      // 4. Corazones y eventos aparecen en cascada
      .to(".corazon-item", {
        opacity: 1,
        scale: 1,
        duration: 0.5,
        stagger: 0.15,
        ease: "back.out(1.5)",
      }, "-=0.5")

      .to(".evento-item", {
        opacity: 1,
        scale: 1,
        duration: 0.6,
        stagger: 0.15,
        ease: "power2.out",
      }, "-=1.5")

      // 5. Decoraci√≥n final
      .to("#deco-final", {
        opacity: 0.7,
        scale: 1,
        duration: 0.8,
        ease: "back.out(1.3)",
      }, "-=0.3");

      // üå∏ ANIMACIONES CONTINUAS
      gsap.to("#flor-itinerario-izq, #flor-itinerario-der", {
        y: -10,
        duration: 4,
        ease: "sine.inOut",
        yoyo: true,
        repeat: -1,
        delay: 2,
      });

      // Corazones pulsando
      gsap.to(".corazon-item", {
        scale: 1.2,
        duration: 1.5,
        ease: "sine.inOut",
        yoyo: true,
        repeat: -1,
        stagger: 0.2,
        delay: 2,
      });

      console.log("üìÖ‚ù§Ô∏è ¬°Itinerario con corazones activado!");
    });
  }
</script>

<style>
  /* Hover en los eventos */
  .evento-item:hover .bg-white\/80 {
    background: rgba(255, 255, 255, 0.95);
    transform: scale(1.03);
    border-color: rgba(162, 119, 53, 0.5);
  }

  /* Corazones con brillo */
  .corazon-item {
    filter: drop-shadow(0 2px 4px rgba(162, 119, 53, 0.3));
    transition: all 0.3s ease;
  }

  .corazon-item:hover {
    filter: drop-shadow(0 4px 8px rgba(162, 119, 53, 0.5));
  }
</style>