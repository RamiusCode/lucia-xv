<section class="py-8 px-4 relative">
  <div class="max-w-3xl mx-auto">
    
    <!-- 游꺛 FLORES ARRIBA -->
    <div class="flex justify-center mb-3" id="flores-arriba-ded">
      <img
        src="/imagenes/FlorArribaSeparador.webp"
        alt="Flores decorativas superiores"
        class="w-48 sm:w-56 md:w-64 lg:w-72 h-auto object-contain"
      />
    </div>

    <!-- TEXTO DEDICATORIA -->
    <div class="text-center px-4">
      <h2
        class="font-charm text-lg sm:text-xl md:text-2xl text-[#95303a] leading-relaxed"
        id="texto-ded"
      >
        Los sue침os se cumplen y hoy uno de los m칤os se hace realidad. Con la
        bendici칩n de Dios y el amor de mi familia, te invito a celebrar mis 15
        a침os.
      </h2>
    </div>

    <!-- 游꺛 FLORES ABAJO -->
    <div class="flex justify-center mt-3" id="flores-abajo-ded">
      <img
        src="/imagenes/FloresAbajoSeparador.webp"
        alt="Flores decorativas inferiores"
        class="w-48 sm:w-56 md:w-64 lg:w-72 h-auto object-contain"
      />
    </div>

  </div>
</section>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  document.addEventListener("DOMContentLoaded", () => {
    console.log("游눓 Iniciando animaciones de dedicatoria...");

    // Estado inicial - Todo oculto
    gsap.set("#flores-arriba-ded", { opacity: 0, y: -30 });
    gsap.set("#texto-ded", { opacity: 0, y: 30 });
    gsap.set("#flores-abajo-ded", { opacity: 0, y: 30 });

    // ScrollTrigger con entrada y salida
    ScrollTrigger.create({
      trigger: "#texto-ded",
      start: "top 100%",
      end: "top 20%",
      
      onEnter: () => {
        console.log("游눓 Dedicatoria apareciendo...");
        animarEntrada();
      },

      onLeaveBack: () => {
        console.log("游눓 Dedicatoria desapareciendo...");
        animarSalida();
      },
    });

    // ANIMACI칍N DE ENTRADA (cuando aparece)
    function animarEntrada() {
      const tl = gsap.timeline();

      // Flores arriba primero
      tl.to("#flores-arriba-ded", {
        opacity: 1,
        y: 0,
        duration: 0.8,
        ease: "power2.out",
      })
      // Texto despu칠s
      .to("#texto-ded", {
        opacity: 1,
        y: 0,
        duration: 1,
        ease: "power2.out",
      }, "-=0.4")
      // Flores abajo al final
      .to("#flores-abajo-ded", {
        opacity: 1,
        y: 0,
        duration: 0.8,
        ease: "power2.out",
      }, "-=0.6");
    }

    // ANIMACI칍N DE SALIDA (cuando desaparece al subir)
    function animarSalida() {
      const tl = gsap.timeline();

      // Todo desaparece r치pido
      tl.to("#flores-abajo-ded", {
        opacity: 0,
        y: 30,
        duration: 0.4,
        ease: "power2.in",
      })
      .to("#texto-ded", {
        opacity: 0,
        y: 30,
        duration: 0.4,
        ease: "power2.in",
      }, "-=0.3")
      .to("#flores-arriba-ded", {
        opacity: 0,
        y: -30,
        duration: 0.4,
        ease: "power2.in",
      }, "-=0.3");
    }
  });
</script>