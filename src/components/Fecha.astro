---
// FechaEvento.astro
---

<section class="py-2 px-4">
  <div class="max-w-2xl mx-auto text-center">
    <!-- Flores centrales arriba -->
    <div class="flex justify-center mb-6" id="flores-fecha">
      <img
        src="/imagenes/Separador.png"
        alt="Flores decorativas"
        class="w-40 md:w-56 lg:w-64 h-auto"
      />
    </div>

    <!-- Texto "Acomp√°√±anos este d√≠a tan especial" CON MARIPOSAS -->
    <div class="mb-4" id="texto-invitacion-container">
      <div
        class="flex items-center justify-center gap-4 sm:gap-6 md:gap-8 px-4"
      >
        <!-- ü¶ã MARIPOSA IZQUIERDA -->
        <div id="mariposa-invitacion-izq" class="flex-shrink-0">
          <img
            src="/gif/MariposaRoja.gif"
            alt="Mariposa izquierda"
            class="w-10 h-auto sm:w-8 sm:h-8 md:w-10 md:h-10 lg:w-12 lg:h-12 object-contain"
          />
        </div>

        <!-- TEXTO CENTRAL - TAMA√ëO AUMENTADO -->
        <div id="texto-invitacion" class="flex-shrink-0">
          <p
            class="font-charm text-2xl sm:text-3xl md:text-4xl text-[#a27735] italic leading-relaxed text-center"
          >
            Acomp√°√±anos este d√≠a<br />tan especial
          </p>
        </div>

        <!-- ü¶ã MARIPOSA DERECHA -->
        <div id="mariposa-invitacion-der" class="flex-shrink-0">
          <img
            src="/gif/MariposaRoja.gif"
            alt="Mariposa derecha"
            class="w-10 h-auto sm:w-8 sm:h-8 md:w-10 md:h-10 lg:w-12 lg:h-12 object-contain transform scale-x-[-1]"
          />
        </div>
      </div>
    </div>

    <!-- Fecha con l√≠neas arriba y abajo -->
    <!-- Fecha con l√≠neas arriba y abajo -->
    <div class="relative max-w-md mx-auto" id="fecha-evento">
      <div class="flex items-center justify-center gap-4 md:gap-6">
        <!-- S√ÅBADO con l√≠neas arriba y abajo - ANCHO FIJO -->
        <div class="flex flex-col items-center w-24 md:w-28">
          <div class="w-full h-px bg-[#a27735] mb-2"></div>
          <span
            class="font-charm text-xl md:text-lg text-[#95303a] uppercase tracking-wider font-bold text-center"
            >S√ÅBADO</span
          >
          <div class="w-full h-px bg-[#a27735] mt-2"></div>
        </div>

        <!-- N√∫mero 20 - CENTRADO -->
        <div
          class="flex items-center justify-center min-w-[80px] md:min-w-[100px]"
        >
          <span class="font-charm text-7xl md:text-8xl text-[#a27735] font-bold -ml-1"
            >08</span
          >
        </div>

        <!-- DICIEMBRE con l√≠neas arriba y abajo - ANCHO FIJO -->
        <div class="flex flex-col items-center w-24 md:w-28">
          <div class="w-full h-px bg-[#a27735] mb-2"></div>
          <span
            class="font-charm text-xl md:text-lg text-[#95303a] uppercase tracking-wider font-bold text-center"
            >NOVIEMBRE</span
          >
          <div class="w-full h-px bg-[#a27735] mt-2"></div>
        </div>
      </div>

      <!-- A√±o - CENTRADO PERFECTO -->
      <!-- <div class="mt-4 flex justify-center" id="anio-evento">
        <p class="font-charm text-3xl md:text-4xl text-[#95303a] font-bold">
          2025
        </p>
      </div> -->
      <!-- A√±o - MOVIDO CON TRANSLATE -->
      <div class="mt-2 flex justify-center" id="anio-evento">
        <p class="font-charm text-3xl md:text-4xl text-[#95303a] font-bold -translate-x-2">2025</p>
      </div>
    </div>
  </div>
</section>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  if (typeof window !== "undefined") {
    document.addEventListener("DOMContentLoaded", () => {
      console.log("‚ú® Iniciando animaciones de fecha...");

      // üéØ ESTADO INICIAL - Todo oculto
      gsap.set("#flores-fecha", { opacity: 0, scale: 0.8, y: -20 });
      gsap.set("#mariposa-invitacion-izq", { opacity: 0, x: -50, y: 20 });
      gsap.set("#mariposa-invitacion-der", { opacity: 0, x: 50, y: 20 });
      gsap.set("#texto-invitacion", { opacity: 0, y: 30 });
      gsap.set("#fecha-evento", { opacity: 0, y: 30 });
      gsap.set("#anio-evento", { opacity: 0, y: 20 });

      // ‚ú® ANIMACI√ìN 1: FLORES ARRIBA (zoom in)
      gsap.to("#flores-fecha", {
        opacity: 1,
        scale: 1,
        y: 0,
        duration: 1,
        ease: "back.out(1.4)",
        scrollTrigger: {
          trigger: "#flores-fecha",
          start: "top 90%",
          end: "top 20%",
          toggleActions: "play none none reverse",
          onLeaveBack: () => {
            gsap.set("#flores-fecha", { opacity: 0, scale: 0.8, y: -20 });
          },
        },
      });

      // ‚ú® ANIMACI√ìN 2: MARIPOSA IZQUIERDA (llega de la izquierda)
      gsap.to("#mariposa-invitacion-izq", {
        opacity: 1,
        x: 0,
        y: 0,
        duration: 1.2,
        ease: "power2.out",
        scrollTrigger: {
          trigger: "#texto-invitacion-container",
          start: "top 85%",
          end: "top 20%",
          toggleActions: "play none none reverse",
          onLeaveBack: () => {
            gsap.set("#mariposa-invitacion-izq", { opacity: 0, x: -50, y: 20 });
          },
        },
      });

      // ‚ú® ANIMACI√ìN 3: MARIPOSA DERECHA (llega de la derecha)
      gsap.to("#mariposa-invitacion-der", {
        opacity: 1,
        x: 0,
        y: 0,
        duration: 1.2,
        ease: "power2.out",
        scrollTrigger: {
          trigger: "#texto-invitacion-container",
          start: "top 85%",
          end: "top 20%",
          toggleActions: "play none none reverse",
          onLeaveBack: () => {
            gsap.set("#mariposa-invitacion-der", { opacity: 0, x: 50, y: 20 });
          },
        },
      });

      // ü¶ã FLOTADO DE MARIPOSAS (despu√©s de aparecer)
      gsap.to("#mariposa-invitacion-izq", {
        y: -8,
        duration: 2.5,
        ease: "sine.inOut",
        yoyo: true,
        repeat: -1,
        delay: 1.2,
      });

      gsap.to("#mariposa-invitacion-der", {
        y: -8,
        duration: 2.5,
        ease: "sine.inOut",
        yoyo: true,
        repeat: -1,
        delay: 1.2,
      });

      // ‚ú® ANIMACI√ìN 4: TEXTO CENTRAL (fade in desde abajo)
      gsap.to("#texto-invitacion", {
        opacity: 1,
        y: 0,
        duration: 1,
        ease: "power2.out",
        scrollTrigger: {
          trigger: "#texto-invitacion-container",
          start: "top 85%",
          end: "top 20%",
          toggleActions: "play none none reverse",
          onLeaveBack: () => {
            gsap.set("#texto-invitacion", { opacity: 0, y: 30 });
          },
        },
      });

      // ‚ú® ANIMACI√ìN 5: FECHA COMPLETA (fade in desde abajo)
      gsap.to("#fecha-evento", {
        opacity: 1,
        y: 0,
        duration: 1,
        ease: "power2.out",
        scrollTrigger: {
          trigger: "#fecha-evento",
          start: "top 85%",
          end: "top 20%",
          toggleActions: "play none none reverse",
          onLeaveBack: () => {
            gsap.set("#fecha-evento", { opacity: 0, y: 30 });
          },
        },
      });

      // ‚ú® ANIMACI√ìN 6: A√ëO (aparece al final)
      gsap.to("#anio-evento", {
        opacity: 1,
        y: 0,
        duration: 0.8,
        ease: "power2.out",
        delay: 0.3,
        scrollTrigger: {
          trigger: "#fecha-evento",
          start: "top 85%",
          end: "top 20%",
          toggleActions: "play none none reverse",
          onLeaveBack: () => {
            gsap.set("#anio-evento", { opacity: 0, y: 20 });
          },
        },
      });

      console.log("üéâ Animaciones de fecha listas!");
    });
  }
</script>
